<!DOCTYPE html>
<html ng-app="vidamo" xmlns="http://www.w3.org/1999/html">

<head>
  <meta charset="utf-8" />
  <title>Vidamo</title>
    <!--loading page-->
    <script  src="js/packages/pace/pace.min.js"></script>
    <link href="css/pace-theme.css" rel="stylesheet" />

    <!-- stylesheet -->
    <link rel="stylesheet" href="css/vidamo-layout.css">
    <link rel="stylesheet" href="css/ui-layout.css">
    <link rel="stylesheet" href="css/bootstrap/bootstrap.css">
    <link rel="stylesheet" href="css/ui-tree.css">
    <link rel="stylesheet" href="css/graph.css">
    <link rel="stylesheet" href="css/select.css">
    <link rel="stylesheet" href="http://cdnjs.cloudflare.com/ajax/libs/selectize.js/0.8.5/css/selectize.default.css">
    <link rel="stylesheet" href="http://cdnjs.cloudflare.com/ajax/libs/select2/3.4.5/select2.css">


    <!--three.js-->
    <link id="theme" href="css/light.css" rel="stylesheet" />
    <link href="js/threejs/editor/css/types.css" rel="stylesheet">

    <script src="js/threejs/build/three.min.js"></script>
    <script src="js/threejs/examples/js/libs/system.min.js"></script>
    <script src="js/threejs/examples/js/controls/EditorControls.js"></script>
    <script src="js/threejs/examples/js/controls/TransformControls.js"></script>
    <script src="js/threejs/examples/js/loaders/BabylonLoader.js"></script>
    <script src="js/threejs/examples/js/loaders/ColladaLoader.js"></script>
    <script src="js/threejs/examples/js/loaders/OBJLoader.js"></script>
    <script src="js/threejs/examples/js/loaders/PLYLoader.js"></script>
    <script src="js/threejs/examples/js/loaders/STLLoader.js"></script>
    <script src="js/threejs/examples/js/loaders/UTF8Loader.js"></script>
    <script src="js/threejs/examples/js/loaders/VRMLLoader.js"></script>
    <script src="js/threejs/examples/js/loaders/VTKLoader.js"></script>
    <script src="js/threejs/examples/js/loaders/ctm/lzma.js"></script>
    <script src="js/threejs/examples/js/loaders/ctm/ctm.js"></script>
    <script src="js/threejs/examples/js/loaders/ctm/CTMLoader.js"></script>
    <script src="js/threejs/examples/js/exporters/SceneExporter.js"></script>
    <script src="js/threejs/examples/js/exporters/OBJExporter.js"></script>
    <script src="js/threejs/examples/js/exporters/STLExporter.js"></script>
    <script src="js/threejs/examples/js/renderers/RaytracingRenderer.js"></script>
    <script src="js/threejs/examples/js/renderers/SoftwareRenderer.js"></script>
    <script src="js/threejs/examples/js/renderers/SVGRenderer.js"></script>

    <script src="js/threejs/examples/js/BufferGeometryUtils.js"></script>
    <script src="js/threejs/examples/js/exporters/BufferGeometryExporter.js"></script>
    <script src="js/threejs/examples/js/exporters/TypedGeometryExporter.js"></script>
    <script src="js/threejs/examples/js/exporters/GeometryExporter.js"></script>
    <script src="js/threejs/examples/js/exporters/MaterialExporter.js"></script>
    <script src="js/threejs/examples/js/exporters/ObjectExporter.js"></script>
    <script src="js/threejs/examples/js/renderers/WebGLRenderer3.js"></script>

    <script src="js/threejs/editor/js/libs/signals.min.js"></script>
    <script src="js/threejs/editor/js/libs/ui.js"></script>
    <script src="js/threejs/editor/js/libs/ui.editor.js"></script>
    <script src="js/threejs/editor/js/libs/ui.three.js"></script>

    <script src="js/threejs/editor/js/Storage.js"></script>
    <script src="js/threejs/editor/js/Editor.js"></script>
    <script src="js/threejs/editor/js/Config.js"></script>
    <script src="js/threejs/editor/js/Loader.js"></script>
    <script src="js/threejs/editor/js/Viewport.js"></script>

    <script src="js/threejs/add.js"></script>

</head>

<body>
        <div ng-controller="graphCtrl">
            <!--dropdown Menu-->
            <div class = "menubar">
                <span class="dropdown" on-toggle="toggled(open)">
                  <a href class="dropdown-toggle">  File |</a>
                  <ul class="dropdown-menu">
                      <li>
                          <a onclick="onNewOptionClick ()"> New </a>
                      </li>

                      <li>
                          <input type="file" id="openSceneJson" name="importGraphJson[]"
                                 style="visibility: hidden; width: 1px; height: 1px" multiple />
                          <a href="" ng-click="openSceneJson()">Open Scene</a>
                      </li>


                      <li id = "sceneJson">
                          <a ng-href="{{sceneUrl}}" download="scene.json" ng-click = "saveSceneJson()"> Save Scene </a>
                      </li>

                  </ul>
                </span>


                <span class="dropdown" on-toggle="toggled(open)" >
                      <a href class="dropdown-toggle">  Node |</a>
                      <ul class="dropdown-menu">
                          <li>
                              <a ng-href="{{sceneUrl}}" download="node.json" ng-click = "importNode()">todo Import Node </a>
                          </li>

                          <li>
                              <a ng-href="{{sceneUrl}}" download="node.json" ng-click = "exportNode()"> todo Export Node </a>
                          </li>
                      </ul>

                </span>

                <span class="dropdown" on-toggle="toggled(open)" >
                    <a href class="dropdown-toggle">  Code |</a>
                    <ul class="dropdown-menu">
                        <li id = "downloadJs">
                            <a ng-href="{{jsUrl}}" download="project.js" ng-click = "downloadJs()"> Export Graph&Nodes </a>
                        </li>

                        <li id = "downloadLib">
                            <a ng-href="{{libUrl}}" download="vidamo.js" ng-click = "downloadLib()"> Export Function Library </a>
                        </li>
                    </ul>
                </span>

                <span class="dropdown" on-toggle="toggled(open)">
                  <a href class="dropdown-toggle">  About </a>
                  <ul class="dropdown-menu">
                      <li>
                          <a href="https://github.com/phtj/vidamo" target="_blank"> Github Repo </a>
                      </li>
                  </ul>
                </span>
            </div>

            <!--resizable layout-->
            <div ui-layout>
                <div class="layout-area" ui-layout="{flow : 'column'}">
                    <!--graph area-->
                    <div class="graph-area" ui-layout-container size="25%">

                        <div ui-layout="{ flow : 'row', dividerSize:'10'}" >
                            <div
                                 mouse-capture
                                 ng-keydown="keyDown($event)"
                                 ng-keyup="keyUp($event)"
                                 ui-layout-container size = "85%"  >

                                <div ng-controller="znpController" class="znpController">
                                    <div>
                                        <panzoom config="panzoomConfig"
                                                 model="panzoomModel"
                                                 class="panzoom">
                                            <div>
                                                <flow-chart chart="chartViewModel" class = "flow-chart" >
                                                </flow-chart>
                                            </div>
                                        </panzoom>
                                    </div>
                                </div>

                                <div class = "buttons">

                                    <ui-select ng-model="type.selected"
                                               append-to-body = "true"
                                               on-select="addNewNode(this.type.selected)"
                                            class="new-node">
                                        <ui-select-match placeholder="New node">{{$select.selected}}</ui-select-match>
                                        <ui-select-choices repeat="type in nodeTypes| filter: $select.search">
                                            <span ng-bind-html="type| highlight: $select.search"></span>
                                        </ui-select-choices>
                                    </ui-select>

                                    <button class="btn btn-default btn-xs"
                                            ng-click="addNewInputConnector()"
                                            ng-disabled="chartViewModel.getSelectedNodes().length == 0"
                                            title="Add a new input connector to the selected node">
                                        Add Input
                                    </button>
                                    <button class="btn btn-default btn-xs"
                                            ng-click="addNewOutputConnector()"
                                            ng-disabled="chartViewModel.getSelectedNodes().length == 0"
                                            title="Add a new output connector to the selected node">
                                        Add Output
                                    </button>
                                    <button class="btn btn-default btn-xs"
                                            ng-click="deleteSelected()"
                                            ng-disabled="chartViewModel.getSelectedNodes().length
                                                == 0 && chartViewModel.getSelectedConnections().length == 0"
                                            title="Delete selected nodes and connections">
                                        Delete
                                    </button>
                                    <button class="btn btn-default btn-xs"
                                            ng-click="run()"
                                            title="Run program">
                                        Run
                                    </button>
                                </div>
                            </div>

                            <div ui-layout-container size = "15%">
                                    <div class="info-title">Scene Code:</div>

                                    <div class="codeEditor"
                                         ui-ace="{ mode: 'javascript',
                                                   theme: 'tomorrow',
                                                  }"
                                         ng-model="javascriptCode"
                                         >
                                    </div>
                            </div>
                        </div>
                    </div>

                <!--3D view area  -->
                    <div class=" view-area" ui-layout-container size="50%">
                        <div ui-layout="{ flow : 'row', dividerSize:'10'}" >
                        <!--threejs editor view port-->
                            <div ui-layout-container size = "85%">
                                <div id="3dviewport" >
                                </div>
                            </div>

                            <div ui-layout-container size = "15%" class="monitor">
                                <div>
                                    <div class="info-title">Console:</div>
                                    <div class="console" id = 'log'></div>
                                </div>
                            </div>
                        </div>

                    </div>


                <!--code area-->
                <div class="code-area" ui-layout-container size="25%">
                    <div ui-layout="{ flow : 'row', dividerSize:'10'}" >
                        <div ui-layout-container size = "85%">
                            <div ng-if = "currentNodeName != ''">
                                <pre class="nodeName">&nbsp Node: &nbsp {{currentNodeName}}</pre>
                            </div>

                            <tabset justified="true" >
                                <!--add to interface -->
                                <tab heading="Parameters">
                                    <div class="tabArea">
                                        <script type="text/ng-template" id="nodes_renderer_interface.html">
                                            <div ui-tree-handle class="tree-node tree-node-content">
                                                <accordion>
                                                    <accordion-group is-open="true">
                                                        <accordion-heading>
                                                            <a ng-if="node.nodes && node.nodes.length > 0
                                                                        || node.nodes && node.nodes.length == 0"
                                                               data-nodrag ng-click="toggle(this)">
                                                                <i class="glyphicon"
                                                                   ng-class=
                                                                           "{'glyphicon-chevron-right': collapsed,
                                                                                             'glyphicon-chevron-down': !collapsed}">
                                                                </i>
                                                            </a>
                                                            {{node.title}}
                                                            <a class="pull-right btn btn-xs"
                                                               data-nodrag ng-click="remove(this)">
                                                                            <span class="glyphicon glyphicon-remove">
                                                                            </span>
                                                            </a>
                                                        </accordion-heading>

                                                        <div ui-tree-nodes=""
                                                             ng-model="node.nodes"
                                                             ng-class="{hidden: collapsed}">

                                                            <!--data name and value for interface data -->
                                                            <div ng-if="node.title == 'Data'">
                                                                <div class="input-group input-group-sm">
                                                                    <span class="input-group-addon"> data name: </span>

                                                                    <ui-select ng-model="addToInterface"
                                                                               append-to-body = "true"
                                                                               class = "procedure-select"
                                                                               on-select="applyValue('addToInterface', this.addToInterface,node)">
                                                                        <ui-select-match placeholder="{{node.dataName}}">{{$select.selected.dataName}}</ui-select-match>
                                                                        <ui-select-choices
                                                                                repeat="node in flattenData | dataFilter | dataNameFilter| filter: $select.search">
                                                                            <div>
                                                                                <span ng-bind-html="node.dataName| highlight: $select.search"></span>
                                                                            </div>
                                                                        </ui-select-choices>
                                                                    </ui-select>
                                                                </div>

                                                                <div class="input-group input-group-sm">
                                                                    <span class="input-group-addon" >data value</span>
                                                                    <input class="form-control"
                                                                           name="interfaceValue"
                                                                           placeholder="{{node.dataValue}}"
                                                                           ng-model="interfaceValue"
                                                                           ng-change=
                                                                                   "applyValue('interfaceValue',this.interfaceValue,node)">
                                                                </div>
                                                            </div>

                                                            <div ng-repeat="node in node.nodes"
                                                                 ui-tree-node ng-include="'nodes_renderer_interface.html'">
                                                            </div>
                                                        </div>
                                                    </accordion-group>
                                            </div>
                                            </accordion>
                                        </script>

                                        <div ui-tree id="tree-root-1">
                                            <div ui-tree-nodes="" ng-model="interface">
                                                <div ng-repeat="node in interface"
                                                     ui-tree-node ng-include="'nodes_renderer_interface.html'">
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="buttons">
                                        <button class="btn btn-default btn-xs" ng-click="newInterface('Data')">New Parameter</button>
                                    </div>
                                </tab>
                                <tab heading="Procedure" style="height:100%">
                                    <div class="tabArea">
                                            <script type="text/ng-template" id="nodes_renderer_procedure.html">
                                                <div ui-tree-handle class="tree-node tree-node-content">
                                                    <accordion>
                                                            <accordion-group ng-init="status = {open: true}" is-open="status.open">

                                                                <accordion-heading>
                                                                <div>
                                                                    <span ng-if="node.nodes && node.nodes.length > 0
                                                                    || node.nodes && node.nodes.length == 0"
                                                                       data-nodrag>
                                                                          <i class="glyphicon"
                                                                                ng-class=
                                                                                        "{'glyphicon-chevron-right': !status.open,
                                                                                         'glyphicon-chevron-down': status.open}">
                                                                          </i>
                                                                    </span>

                                                                <span style="width: 100%;color: black;">
                                                                        {{node.title}}
                                                                        <span class="subheading">
                                                                            <span ng-if="node.dataName&&(!node.method)&&(!node.controlType)">
                                                                                :&nbsp;{{node.dataName}}
                                                                            </span>

                                                                            <span ng-if="node.method">
                                                                                :&nbsp;{{node.method}}
                                                                            </span>

                                                                            <span ng-if="node.controlType">
                                                                                :&nbsp;{{node.controlType}}
                                                                            </span>
                                                                        </span>
                                                                </span>

                                                                    <span class="pull-right btn btn-xs"
                                                                       data-nodrag ng-click="remove(this)">
                                                                        <span class="glyphicon glyphicon-remove">
                                                                        </span>
                                                                    </span>
                                                                </div>
                                                                </accordion-heading>

                                                                <div ui-tree-nodes=""
                                                                     ng-model="node.nodes"
                                                                     ng-class="{hidden: collapsed}">

                                                                    <!--data name and value for data -->
                                                                    <div ng-if="node.title == 'Data'">
                                                                        <div class="input-group input-group-sm">
                                                                            <span class="input-group-addon"> Data Type: </span>
                                                                            <ui-select ng-model="dataType"
                                                                                       append-to-body = "true"
                                                                                       class = "procedure-select"
                                                                                       on-select="applyValue('dataType',this.dataType,node)">
                                                                                <ui-select-match placeholder="{{node.dataType}}">{{$select.selected}}</ui-select-match>
                                                                                <ui-select-choices repeat="dataType in dataTypes| filter: $select.search">
                                                                                    <span ng-bind-html="dataType| highlight: $select.search"></span>
                                                                                </ui-select-choices>
                                                                            </ui-select>
                                                                        </div>

                                                                        <div ng-if="node.dataType == 'var'">
                                                                            <div class="input-group input-group-sm">
                                                                                <span class="input-group-addon">Var name</span>
                                                                                <input  type="text"
                                                                                        class="form-control"
                                                                                       name="dataName"
                                                                                       placeholder="{{node.dataName}}"
                                                                                       ng-model="dataName"
                                                                                       ng-change=
                                                                                           "applyValue('dataName',this.dataName,node)">
                                                                            </div>

                                                                            <div class="input-group input-group-sm">
                                                                                <span class="input-group-addon" >Var value</span>
                                                                                <input class="form-control"
                                                                                       name="dataValue"
                                                                                       placeholder="{{node.dataValue}}"
                                                                                       ng-model="dataValue"
                                                                                       ng-change=
                                                                                           "applyValue('dataValue',this.dataValue,node)">
                                                                            </div>
                                                                        </div>

                                                                        <div ng-if="node.dataType == 'list'">
                                                                            <div class="input-group input-group-sm">
                                                                                <span class="input-group-addon">List name</span>
                                                                                <input class="form-control"
                                                                                       name="dataName"
                                                                                       placeholder="{{node.dataName}}"
                                                                                       ng-model="dataName"
                                                                                       ng-change=
                                                                                               "applyValue('dataName',this.dataName,node)">
                                                                            </div>

                                                                            <div class="input-group input-group-sm">
                                                                                <span class="input-group-addon" >List value</span>
                                                                                <input class="form-control"
                                                                                       name="dataValue"
                                                                                       placeholder="{{node.dataValue}}"
                                                                                       ng-model="dataValue"
                                                                                       ng-change=
                                                                                               "applyValue('dataValue',this.dataValue,node)">
                                                                            </div>
                                                                        </div>
                                                                    </div>

                                                                    <!-- looping for Control-->
                                                                    <div ng-if="node.title == 'Control'">
                                                                        <div class="input-group input-group-sm">
                                                                            <span class="input-group-addon"> Control Type: </span>
                                                                            <ui-select ng-model="controlType"
                                                                                       append-to-body = "true"
                                                                                       class = "procedure-select"
                                                                                       on-select="applyValue('controlType',this.controlType,node)">
                                                                                <ui-select-match placeholder="{{node.controlType}}">{{$select.selected}}</ui-select-match>
                                                                                <ui-select-choices repeat="controlType in controlTypes| filter: $select.search">
                                                                                    <span ng-bind-html="controlType| highlight: $select.search"></span>
                                                                                </ui-select-choices>
                                                                            </ui-select>
                                                                        </div>

                                                                        <div ng-if="node.controlType == 'for item in list'">
                                                                            <div class="input-group input-group-sm">
                                                                                <span class="input-group-addon">item name</span>
                                                                                <input
                                                                                    class="form-control"
                                                                                    placeholder="{{node.dataName}}"
                                                                                name ="dataName"
                                                                                ng-model="dataName"
                                                                                ng-change="applyValue('dataName',this.dataName,node)">
                                                                            </div>

                                                                            <div class="input-group input-group-sm">
                                                                                <span class="input-group-addon"> List: </span>

                                                                                <ui-select ng-model="forList"
                                                                                           append-to-body = "true"
                                                                                           class = "procedure-select"
                                                                                           on-select="applyValue('forList',this.forList,node)">
                                                                                    <ui-select-match placeholder="{{node.forList}}">{{$select.selected.dataName}}</ui-select-match>
                                                                                    <ui-select-choices
                                                                                            repeat="node.dataName as node in flattenData | positionFilter:node.id:this |dataNameFilter| filter: $select.search">
                                                                                        <div>
                                                                                            <span ng-bind-html="node.dataName| highlight: $select.search"></span>
                                                                                        </div>
                                                                                    </ui-select-choices>
                                                                                </ui-select>

                                                                            </div>
                                                                        </div>
                                                                    </div>

                                                                    <!--dropdown menu for Action-->
                                                                    <div ng-if="node.title == 'Action'">
                                                                        <div class="input-group input-group-sm">
                                                                            <span class="input-group-addon"> Method: </span>

                                                                            <ui-select ng-model="method"
                                                                                       append-to-body = "true"
                                                                                       class = "procedure-select"
                                                                                       on-select="applyValue('method',this.method,node)">
                                                                                <ui-select-match placeholder="{{node.method}}">{{$select.selected.name}}</ui-select-match>
                                                                                <ui-select-choices
                                                                                        group-by="'usage'"
                                                                                        repeat="method.name as method in methods| filter: $select.search" >
                                                                                    <span ng-bind-html="method.name| highlight: $select.search"></span>
                                                                                </ui-select-choices>
                                                                            </ui-select>

                                                                        </div>
                                                                    </div>

                                                                    <!--method for list length-->
                                                                    <div ng-if="node.method == 'list length'">
                                                                        <div class="input-group input-group-sm">
                                                                            <span class="input-group-addon"> List: </span>

                                                                            <ui-select ng-model="targetList"
                                                                                       append-to-body = "true"
                                                                                       class = "procedure-select"
                                                                                       on-select="applyValue('targetList',this.targetList,node)">
                                                                                <ui-select-match placeholder="{{node.parameters[0]}}">{{$select.selected.dataName}}</ui-select-match>
                                                                                <ui-select-choices
                                                                                        repeat="node.dataName as node in flattenData
                                                                                        | positionFilter:node.id:this
                                                                                        | dataNameFilter
                                                                                        | filter: $select.search">
                                                                                    <div>
                                                                                        <span ng-bind-html="node.dataName| highlight: $select.search"></span>
                                                                                    </div>
                                                                                </ui-select-choices>
                                                                            </ui-select>

                                                                        </div>

                                                                        <div class="input-group input-group-sm">
                                                                            <span class="input-group-addon">Length var name:</span>
                                                                            <input class="form-control"
                                                                                   name="dataName"
                                                                                   placeholder="{{node.dataName}}"
                                                                                   ng-model="dataName"
                                                                                   ng-change=
                                                                                           "applyValue('dataName',this.dataName,node)">
                                                                        </div>
                                                                    </div>

                                                                    <!--method for list item-->
                                                                    <div ng-if="node.method == 'list item'">
                                                                        <div class="input-group input-group-sm">
                                                                            <span class="input-group-addon"> List: </span>
                                                                            <ui-select ng-model="targetList"
                                                                                       append-to-body = "true"
                                                                                       class = "procedure-select"
                                                                                       on-select="applyValue('targetList',this.targetList,node)">
                                                                                <ui-select-match placeholder="{{node.parameters[0]}}">{{$select.selected.dataName}}</ui-select-match>
                                                                                <ui-select-choices
                                                                                        repeat="node.dataName as node in flattenData
                                                                                        | positionFilter:node.id:this
                                                                                        | dataNameFilter
                                                                                        | filter: $select.search">
                                                                                    <div>
                                                                                        <span ng-bind-html="node.dataName| highlight: $select.search"></span>
                                                                                    </div>
                                                                                </ui-select-choices>
                                                                            </ui-select>
                                                                        </div>

                                                                        <div class="input-group input-group-sm">
                                                                            <span class="input-group-addon">Item index:</span>
                                                                            <input class="form-control"
                                                                                   name="itemIndex"
                                                                                   placeholder="{{node.parameters[1]}}"
                                                                                   ng-model="itemIndex"
                                                                                   ng-change=
                                                                                           "applyValue('itemIndex',this.itemIndex,node)">
                                                                        </div>

                                                                        <div class="input-group input-group-sm">
                                                                            <span class="input-group-addon">Item var name:</span>
                                                                            <input class="form-control"
                                                                                   name="dataName"
                                                                                   placeholder="{{node.dataName}}"
                                                                                   ng-model="dataName"
                                                                                   ng-change=
                                                                                           "applyValue('dataName',this.dataName,node)">
                                                                        </div>
                                                                    </div>

                                                                    <!--method for sort list-->
                                                                    <div ng-if="node.method == 'sort list'">
                                                                        <div class="input-group input-group-sm">
                                                                            <span class="input-group-addon"> List: </span>
                                                                            <ui-select ng-model="targetList"
                                                                                       append-to-body = "true"
                                                                                       class = "procedure-select"
                                                                                       on-select="applyValue('targetList',this.targetList,node)">
                                                                                <ui-select-match placeholder=" {{node.parameters[0]}}">{{$select.selected.dataName}}</ui-select-match>
                                                                                <ui-select-choices
                                                                                        repeat="node.dataName as node in flattenData
                                                                                        | positionFilter:node.id:this
                                                                                        | dataNameFilter
                                                                                        | filter: $select.search">
                                                                                    <div>
                                                                                        <span ng-bind-html="node.dataName| highlight: $select.search"></span>
                                                                                    </div>
                                                                                </ui-select-choices>
                                                                            </ui-select>
                                                                        </div>

                                                                        <div class="input-group input-group-sm">
                                                                            <span class="input-group-addon"> Category: </span>
                                                                            <select ng-model="category"
                                                                                    class="form-control"
                                                                                    ng-change =
                                                                                            "applyValue('category', this.category,node)">
                                                                                <option value=""
                                                                                        selected="selected">
                                                                                    {{node.parameters[1]}}
                                                                                </option>
                                                                                <option value="alphabetic">
                                                                                    alphabetic
                                                                                </option>
                                                                                <option value="numeric">
                                                                                    numeric
                                                                                </option>
                                                                            </select>
                                                                        </div>


                                                                        <div class="input-group input-group-sm">
                                                                            <span class="input-group-addon">Sorted list name:</span>
                                                                            <input class="form-control"
                                                                                   name="dataName"
                                                                                   placeholder="{{node.dataName}}"
                                                                                   ng-model="dataName"
                                                                                   ng-change=
                                                                                           "applyValue('dataName',this.dataName,node)">
                                                                        </div>
                                                                    </div>

                                                                    <!--method for reverse list-->
                                                                    <div ng-if="node.method == 'reverse list'">
                                                                        <div class="input-group input-group-sm">
                                                                            <span class="input-group-addon"> List: </span>
                                                                            <ui-select ng-model="targetList"
                                                                                       append-to-body = "true"
                                                                                       class = "procedure-select"
                                                                                       on-select="applyValue('targetList',this.targetList,node)">
                                                                                <ui-select-match placeholder="{{node.parameters[0]}}">{{$select.selected.dataName}}</ui-select-match>
                                                                                <ui-select-choices
                                                                                        repeat="node.dataName as node in flattenData
                                                                                        | positionFilter:node.id:this
                                                                                        | dataNameFilter
                                                                                        | filter: $select.search">
                                                                                    <div>
                                                                                        <span ng-bind-html="node.dataName| highlight: $select.search"></span>
                                                                                    </div>
                                                                                </ui-select-choices>
                                                                            </ui-select>
                                                                        </div>

                                                                        <div class="input-group input-group-sm">
                                                                            <span class="input-group-addon">Reversed list name:</span>
                                                                            <input class="form-control"
                                                                                   name="dataName"
                                                                                   placeholder="{{node.dataName}}"
                                                                                   ng-model="dataName"
                                                                                   ng-change=
                                                                                           "applyValue('dataName',this.dataName,node)">
                                                                        </div>
                                                                    </div>

                                                                    <!--method for concatenate two lists-->
                                                                    <div ng-if="node.method == 'combine lists'">
                                                                        <div class="input-group input-group-sm">
                                                                            <span class="input-group-addon"> List1: </span>
                                                                            <ui-select ng-model="targetList1"
                                                                                       append-to-body = "true"
                                                                                       class = "procedure-select"
                                                                                       on-select="applyValue('targetList1',this.targetList1,node)">
                                                                                <ui-select-match placeholder="{{node.parameters[0]}}">{{$select.selected.dataName}}</ui-select-match>
                                                                                <ui-select-choices
                                                                                        repeat="node.dataName as node in flattenData
                                                                                        | positionFilter:node.id:this
                                                                                        | dataNameFilter
                                                                                        | filter: $select.search">
                                                                                    <div>
                                                                                        <span ng-bind-html="node.dataName| highlight: $select.search"></span>
                                                                                    </div>
                                                                                </ui-select-choices>
                                                                            </ui-select>
                                                                        </div>

                                                                        <div class="input-group input-group-sm">
                                                                            <span class="input-group-addon"> List2: </span>
                                                                            <ui-select ng-model="targetList2"
                                                                                       append-to-body = "true"
                                                                                       class = "procedure-select"
                                                                                       on-select="applyValue('targetList2',this.targetList2,node)">
                                                                                <ui-select-match placeholder="{{node.parameters[1]}}">{{$select.selected.dataName}}</ui-select-match>
                                                                                <ui-select-choices
                                                                                        repeat="node.dataName as node in flattenData
                                                                                        | positionFilter:node.id:this
                                                                                        | dataNameFilter
                                                                                        | filter: $select.search">
                                                                                    <div>
                                                                                        <span ng-bind-html="node.dataName| highlight: $select.search"></span>
                                                                                    </div>
                                                                                </ui-select-choices>
                                                                            </ui-select>
                                                                        </div>

                                                                        <div class="input-group input-group-sm">
                                                                            <span class="input-group-addon">Resulted list name:</span>
                                                                            <input class="form-control"
                                                                                   name="dataName"
                                                                                   placeholder="{{node.dataName}}"
                                                                                   ng-model="dataName"
                                                                                   ng-change=
                                                                                           "applyValue('dataName',this.dataName,node)">
                                                                        </div>
                                                                    </div>

                                                                    <!--method for insert items-->
                                                                    <div ng-if="node.method == 'insert items to list'">
                                                                        <div class="input-group input-group-sm">
                                                                            <span class="input-group-addon"> List: </span>
                                                                            <ui-select ng-model="targetList"
                                                                                       append-to-body = "true"
                                                                                       class = "procedure-select"
                                                                                       on-select="applyValue('targetList',this.targetList,node)">
                                                                                <ui-select-match placeholder=" {{node.parameters[0]}}">{{$select.selected.dataName}}</ui-select-match>
                                                                                <ui-select-choices
                                                                                        repeat="node.dataName as node in flattenData
                                                                                        | positionFilter:node.id:this
                                                                                        | dataNameFilter
                                                                                        | filter: $select.search">
                                                                                    <div>
                                                                                        <span ng-bind-html="node.dataName| highlight: $select.search"></span>
                                                                                    </div>
                                                                                </ui-select-choices>
                                                                            </ui-select>
                                                                        </div>

                                                                        <div class="input-group input-group-sm">
                                                                            <span class="input-group-addon">Location:</span>
                                                                            <input class="form-control"
                                                                                   name="location"
                                                                                   placeholder="{{node.parameters[1]}}"
                                                                                   ng-model="location"
                                                                                   ng-change=
                                                                                           "applyValue('location',this.location,node)">
                                                                        </div>

                                                                        <div class="input-group input-group-sm">
                                                                            <span class="input-group-addon" >Items</span>
                                                                            <input class="form-control"
                                                                                   name="insertItems"
                                                                                   placeholder="{{node.dataValue}}"
                                                                                   ng-model="dataValue"
                                                                                   ng-change=
                                                                                           "applyValue('dataValue',this.dataValue,node)">
                                                                        </div>


                                                                        <div class="input-group input-group-sm">
                                                                            <span class="input-group-addon">Sorted list name:</span>
                                                                            <input class="form-control"
                                                                                   name="dataName"
                                                                                   placeholder="{{node.dataName}}"
                                                                                   ng-model="dataName"
                                                                                   ng-change=
                                                                                           "applyValue('dataName',this.dataName,node)">
                                                                        </div>
                                                                    </div>


                                                                    <!--method for set data to output port-->
                                                                    <div ng-if="node.method == 'set output'">
                                                                        <div class="input-group input-group-sm">
                                                                            <span class="input-group-addon"> Output port: </span>

                                                                            <ui-select ng-model="outputPort"
                                                                                       append-to-body = "true"
                                                                                       class = "procedure-select"
                                                                                       on-select="applyValue('outputPort',this.outputPort.name,node)">
                                                                                <ui-select-match placeholder="{{node.parameters[0]}}">{{$select.selected.name}}</ui-select-match>
                                                                                <ui-select-choices repeat="outputPort in node.parentNode.outputConnectors | filter: $select.search">
                                                                                    <div>
                                                                                        <span ng-bind-html="outputPort.name| highlight: $select.search"></span>
                                                                                    </div>
                                                                                </ui-select-choices>
                                                                            </ui-select>

                                                                        </div>
                                                                        <div class="input-group input-group-sm">
                                                                        <span class="input-group-addon"> Data name: </span>
                                                                            <ui-select ng-model="outputDataName"
                                                                                       append-to-body = "true"
                                                                                       class = "procedure-select"
                                                                                       on-select="applyValue('outputDataName',this.outputDataName,node)">
                                                                                <ui-select-match placeholder=" {{node.parameters[2]}}">{{$select.selected.dataName}}</ui-select-match>
                                                                                <ui-select-choices repeat="node.dataName as node in flattenData | positionFilter:node.id:this | dataNameFilter| filter: $select.search">
                                                                                    <div>
                                                                                        <span ng-bind-html="node.dataName| highlight: $select.search"></span>
                                                                                    </div>
                                                                                </ui-select-choices>
                                                                            </ui-select>
                                                                        </div>
                                                                    </div>

                                                                    <!--method for get data from input port-->
                                                                    <div ng-if="node.method == 'get input'">
                                                                        <div class="input-group input-group-sm">
                                                                        <span class="input-group-addon"> Input port: </span>
                                                                            <ui-select ng-model="inputPort"
                                                                                       append-to-body = "true"
                                                                                       class = "procedure-select"
                                                                                       on-select="applyValue('inputPort',this.inputPort.name,node)">
                                                                                <ui-select-match placeholder="{{node.parameters[0]}}">{{$select.selected.name}}</ui-select-match>
                                                                                <ui-select-choices repeat="inputPort in node.parentNode.inputConnectors | filter: $select.search">
                                                                                    <div>
                                                                                        <span ng-bind-html="inputPort.name| highlight: $select.search"></span>
                                                                                    </div>
                                                                                </ui-select-choices>
                                                                            </ui-select>
                                                                        </div>

                                                                        <div class="input-group input-group-sm">
                                                                            <span class="input-group-addon">Data name</span>
                                                                            <input class="form-control"
                                                                                   name="dataName"
                                                                                   placeholder="{{node.dataName}}"
                                                                                   ng-model="dataName"
                                                                                   ng-change=
                                                                                           "applyValue('dataName',this.dataName,node)">
                                                                        </div>
                                                                    </div>

                                                                    <!--method for print data-->
                                                                    <div ng-if="node.method == 'print data'">
                                                                        <div class="input-group input-group-sm">
                                                                            <span class="input-group-addon"> Data name: </span>
                                                                            <ui-select ng-model="printDataName"
                                                                                       append-to-body = "true"
                                                                                       class = "procedure-select"
                                                                                       on-select="applyValue('printDataName',this.printDataName,node)">
                                                                                <ui-select-match placeholder=" {{node.parameters[0]}}">{{$select.selected.dataName}}</ui-select-match>
                                                                                <ui-select-choices repeat="node.dataName as node in flattenData | positionFilter:node.id:this  | dataNameFilter| filter: $select.search">
                                                                                    <div>
                                                                                        <span ng-bind-html="node.dataName| highlight: $select.search"></span>
                                                                                    </div>
                                                                                </ui-select-choices>
                                                                            </ui-select>
                                                                        </div>
                                                                    </div>

                                                                    <div ng-repeat="node in node.nodes"
                                                                         ui-tree-node ng-include="'nodes_renderer_procedure.html'">
                                                                    </div>
                                                                </div>
                                                            </accordion-group>
                                                    </div>
                                                    </accordion>
                                            </script>

                                            <div ui-tree id="tree-root">
                                                <div ui-tree-nodes="" ng-model="data">
                                                    <div ng-repeat="node in data"
                                                         ui-tree-node ng-include="'nodes_renderer_procedure.html'">
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <div class = "buttons" >
                                            <br>
                                            <button class="btn btn-default btn-xs" ng-click="newItem('Data')">Add Data</button>
                                            <button class="btn btn-default btn-xs" ng-click="newItem('Action')">Add Action</button>
                                            <button class="btn btn-default btn-xs" ng-click="newItem('Control')">Add Control</button>
                                        </div>
                                </tab>

                            </tabset>
                        </div>

                        <div ui-layout-container size = "15%" class="monitor">
                            <!--ace text editor-->
                            <div ng-if="!codeList[nodeIndex]">
                                <div class="info-title">Procedure Code: </div>
                                <div class="codeEditor" ui-ace="{ mode: 'javascript', theme: 'tomorrow' }"
                                     readonly="{{true}}">// To generate code,
// create nodes & procedures and run!</div>
                            </div>

                            <div ng-if="codeList[nodeIndex]">
                                <div class="info-title">Procedure Code: </div>
                                <div class="codeEditor" ui-ace="{ mode: 'javascript', theme: 'tomorrow' }"
                                     ng-model="codeList[nodeIndex]"
                                     readonly="{{true}}">
                                </div>
                            </div>
                        </div>
                    </div>

                </div>

              </div>
            </div>
    </div>

     <!--jquery-->
     <script type="text/javascript" src="js/jquery/jquery-1.11.1.js"></script>

     <!--angular modules -->
     <script type="application/javascript" src="js/angular/angular.min.js"></script>
     <script type="text/javascript" src="js/angular/angular-sanitize.js"></script>

     <!--angular-ui packages-->
     <script type="text/javascript" src="js/angular-ui/ui-ace/ui-ace.js"></script>
     <script type="application/javascript" src="js/angular-ui/ui-layout/ui-layout.js"></script>
     <script src="js/angular-ui/ui-bootstrap/ui-bootstrap-tpls-0.11.0.min.js"></script>
     <script type="text/javascript" src="js/angular-ui/ui-tree/angular-ui-tree.js"></script>
        <script type="text/javascript" src="js/angular-ui/ui-select/select.js"></script>

     <!--supporting packages-->
     <script type="text/javascript" src="js/packages/ace-builds/src-min-noconflict/ace.js"></script>

     <!--flowchart system-->
     <script src="js/angular-ui/ui-flowchart/debug.js" type="text/javascript"></script>
     <script src="js/angular-ui/ui-flowchart/svg_class.js" type="text/javascript"></script>
     <script src="js/angular-ui/ui-flowchart/mouse_capture_service.js" type="text/javascript"></script>
     <script src="js/angular-ui/ui-flowchart/dragging_service.js" type="text/javascript"></script>
     <script src="js/angular-ui/ui-flowchart/flowchart_viewmodel.js" type="text/javascript"></script>
     <script src="js/angular-ui/ui-flowchart/flowchart_directive.js" type="text/javascript"></script>

      <!-- zoom and pan-->
     <script src="js/packages/hamsterjs/hamster.js"></script>
     <script src="js/angular/angular-mousewheel/mousewheel.js"></script>
     <script src="js/angular-ui/ui-panzoom/panzoom.js"></script>

     <!--vidamo angular app-->
     <script src="js/vidamo/vidamo.js"></script>
     <script src="js/vidamo/graph.js"></script>
     <script src="js/vidamo/panzoom.js"></script>
     <script src="js/vidamo/module.js"></script>
     <script src="js/vidamo/viewport.js"></script>

</body>

</html>